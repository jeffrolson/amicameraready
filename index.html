<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Am I Camera Ready?</title>
  <meta name="description" content="Preview your on-camera look and background. No recording. Runs in your browser." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['"Plus Jakarta Sans"', 'ui-sans-serif', 'system-ui'],
          },
          colors: {
            midnight: '#0f172a',
            aurora: {
              100: '#bae6ff',
              400: '#60a5fa',
              500: '#7c3aed',
              600: '#5b21b6',
            },
          },
        },
      },
    };
  </script>
  <style>
    @media (prefers-reduced-motion: no-preference) {
      .fade-up { opacity: 0; transform: translateY(6px); animation: fadeUp .5s ease-out forwards; }
      @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
      .floaty { animation: floaty 6s ease-in-out infinite; }
      @keyframes floaty { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
      .shine { background-size: 200% 100%; animation: shine 3s linear infinite; }
      @keyframes shine { to { background-position: -200% 0; } }
    }
    .mirror { transform: scaleX(-1); }
    .video-scale { transform-origin: center center; transition: transform .15s ease; }
    .stage-height { height: min(78vh, calc(100vh - 12rem)); }
    .grid-overlay {
      pointer-events: none;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.10) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.10) 1px, transparent 1px);
      background-size: calc(100% / 3) 100%, 100% calc(100% / 3);
    }
    .side-marker { transition: opacity .3s ease; }
    .side-marker.hidden-soft { opacity: 0; pointer-events: none; }
    :root {
      color-scheme: dark;
    }
    body {
      font-family: "Plus Jakarta Sans", ui-sans-serif, system-ui;
      background-color: #020617;
      background-image: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.18), transparent 55%),
                        radial-gradient(circle at 80% 10%, rgba(129, 140, 248, 0.22), transparent 45%),
                        radial-gradient(circle at 50% 100%, rgba(248, 113, 113, 0.18), transparent 55%);
    }
    .backdrop-grid {
      background-image: linear-gradient(rgba(148, 163, 184, 0.14) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(148, 163, 184, 0.14) 1px, transparent 1px);
      background-size: 46px 46px;
    }
    .glow-ring {
      background: conic-gradient(from 120deg at 50% 50%, rgba(59, 130, 246, 0.65), rgba(236, 72, 153, 0.65), rgba(14, 165, 233, 0.65));
      filter: blur(52px);
    }
    .frosted-card {
      backdrop-filter: blur(22px);
      background: rgba(15, 23, 42, 0.68);
      border: 1px solid rgba(148, 163, 184, 0.18);
      box-shadow: 0 25px 60px -25px rgba(14, 165, 233, 0.35);
    }
    .primary-btn {
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.95), rgba(79, 70, 229, 0.95));
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      box-shadow: 0 20px 35px -22px rgba(56, 189, 248, 0.8);
    }
    .primary-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 30px 45px -24px rgba(59, 130, 246, 0.85);
    }
    .control-pill {
      border: 1px solid transparent;
      transition: background-color 0.15s ease, border-color 0.15s ease, box-shadow 0.2s ease;
    }
    .control-pill.active {
      border-color: rgba(148, 163, 184, 0.35);
      background: rgba(148, 163, 184, 0.18);
      box-shadow: 0 10px 25px -16px rgba(148, 163, 184, 0.55);
    }
  </style>
</head>
<body class="min-h-screen text-white antialiased overflow-x-hidden">

  <div class="pointer-events-none absolute inset-0 opacity-70">
    <div class="absolute -top-32 left-1/4 h-72 w-72 rounded-full glow-ring"></div>
    <div class="absolute bottom-0 right-0 h-80 w-80 rounded-full glow-ring"></div>
  </div>

  <header class="w-full">
    <div class="mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-4 px-6 py-6 md:px-8">
      <div class="flex items-center gap-4">
        <div class="flex h-12 w-12 items-center justify-center rounded-2xl border border-white/10 bg-white/10 backdrop-blur">
          <img src="./assets/logo.png" alt="Am I Camera Ready logo" class="h-9 select-none" />
        </div>
        <div>
          <p class="text-sm uppercase tracking-[0.3em] text-slate-400">Toolkit</p>
          <h1 class="text-2xl font-semibold md:text-3xl">Am I Camera Ready?</h1>
        </div>
      </div>
      <nav class="flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1 backdrop-blur">
        <button id="toggleReverse" class="control-pill rounded-full px-4 py-2 text-sm font-medium text-white hover:bg-white/15">Reverse</button>
        <button id="toggleGrid"    class="control-pill rounded-full px-4 py-2 text-sm font-medium text-white hover:bg-white/15">Grid</button>
        <button id="stopBtn"       class="control-pill rounded-full px-4 py-2 text-sm font-medium text-white hover:bg-white/15">Stop</button>
      </nav>
    </div>
  </header>

  <!-- Intro Modal with proceed message -->
  <section id="introSection" class="relative flex min-h-[80vh] items-center justify-center px-6 py-12">
    <div class="absolute inset-0 backdrop-grid opacity-40"></div>
    <div class="relative mx-auto grid w-full max-w-5xl items-center gap-8 rounded-3xl border border-white/10 bg-slate-900/70 p-8 shadow-[0_40px_80px_-60px_rgba(56,189,248,0.7)] md:grid-cols-[1.05fr_0.95fr] md:p-12">
      <div class="space-y-6 text-left">
        <span class="inline-flex items-center gap-2 rounded-full border border-slate-700/80 bg-slate-800/60 px-4 py-1 text-xs uppercase tracking-[0.25em] text-slate-300">No Downloads · Privacy First</span>
        <h2 class="text-3xl font-semibold leading-tight md:text-4xl">Dial in your on-camera presence with realtime preview tools.</h2>
        <p class="text-base text-slate-300 md:text-lg">Launch a clean studio view to check framing, lighting, and background before you join the call. Everything happens securely in your browser.</p>
        <div class="flex flex-wrap items-center gap-4">
          <button
            id="continueBtn"
            class="primary-btn inline-flex items-center gap-2 rounded-full px-7 py-3 text-base font-semibold text-white"
          >
            <span>Open Camera Preview</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-5 w-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0-6-6m6 6-6 6" />
            </svg>
          </button>
          <div class="flex items-center gap-3 text-xs text-slate-400">
            <div class="flex -space-x-2">
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/10 bg-white/10 text-[11px]">4K</span>
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/10 bg-white/10 text-[11px]">HD</span>
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/10 bg-white/10 text-[11px]">SD</span>
            </div>
            <span>Works across camera resolutions</span>
          </div>
        </div>
      </div>
      <div class="relative">
        <div class="absolute -inset-6 rounded-3xl bg-gradient-to-br from-sky-500/40 via-transparent to-purple-500/30 blur-3xl"></div>
        <div class="relative overflow-hidden rounded-3xl border border-white/10 bg-slate-900/40 shadow-2xl">
          <div class="relative flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-950 to-slate-900 px-6 py-8">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 120" class="h-40 w-full text-aurora-400/80">
              <defs>
                <linearGradient id="frameGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="rgba(56,189,248,0.6)" />
                  <stop offset="50%" stop-color="rgba(129,140,248,0.6)" />
                  <stop offset="100%" stop-color="rgba(236,72,153,0.6)" />
                </linearGradient>
              </defs>
              <rect x="16" y="16" width="168" height="88" rx="16" fill="none" stroke="url(#frameGradient)" stroke-width="3" />
              <path d="M52 32h96v56H52z" fill="none" stroke="rgba(96,165,250,0.4)" stroke-width="2" stroke-dasharray="6 8" />
              <circle cx="100" cy="60" r="18" stroke="rgba(96,165,250,0.4)" fill="none" stroke-width="2" />
              <circle cx="100" cy="60" r="4" fill="rgba(96,165,250,0.6)" />
              <path d="M100 24v8m0 56v8m60-36h-8m-104 0H40" stroke="rgba(96,165,250,0.4)" stroke-width="2" stroke-linecap="round" />
            </svg>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Full-Bleed Video Stage -->
  <section id="stageSection" class="relative hidden stage-height select-none px-6 pb-10 pt-4 md:px-10">
    <div class="mx-auto flex h-full w-full max-w-6xl items-center justify-center">
      <div class="relative h-full w-full overflow-hidden rounded-[28px] border border-white/10 bg-slate-900/40 shadow-[0_40px_70px_-45px_rgba(56,189,248,0.8)]">
        <div id="videoInner" class="video-scale absolute inset-0">
          <video id="video" playsinline autoplay muted class="h-full w-full object-cover"></video>
        </div>
        <div id="grid" class="absolute inset-0 rounded-[28px] opacity-0 transition-opacity grid-overlay"></div>

      <!-- Left/Right Markers -->
      <span id="labelLeft"
            class="side-marker hidden-soft absolute top-1/2 -translate-y-1/2 inline-flex items-center justify-center
                   px-3 py-1 rounded-lg bg-slate-900/45 text-white text-xs md:text-sm ring-1 ring-white/10 backdrop-blur"
            style="left: 0.75rem;">
        Left
      </span>
      <span id="labelRight"
            class="side-marker hidden-soft absolute top-1/2 -translate-y-1/2 inline-flex items-center justify-center
                   px-3 py-1 rounded-lg bg-slate-900/45 text-white text-xs md:text-sm ring-1 ring-white/10 backdrop-blur"
            style="right: 0.75rem;">
        Right
      </span>

      <!-- Zoom Controls -->
      <div class="absolute bottom-4 right-4 flex gap-2">
        <button id="zoomOut" aria-label="Zoom out"
                class="h-9 w-9 rounded-full border border-white/10 bg-slate-900/70 text-lg leading-none shadow hover:border-white/20 hover:bg-slate-900">−</button>
        <button id="zoomIn"  aria-label="Zoom in"
                class="h-9 w-9 rounded-full border border-white/10 bg-slate-900/70 text-lg leading-none shadow hover:border-white/20 hover:bg-slate-900">+</button>
        <span id="zoomValue"
              class="self-center rounded-full border border-white/10 bg-slate-900/60 px-3 py-1 text-xs font-medium uppercase tracking-wide text-slate-200">1.00x</span>
      </div>
    </div>
  </section>

  <!-- Tips Boxes + Footer -->
  <section class="px-6 pb-16 pt-10 md:px-10">
    <div class="mx-auto grid max-w-6xl gap-6 md:grid-cols-4">
      <article class="frosted-card rounded-2xl p-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Framing</p>
        <h3 class="mt-3 text-lg font-semibold">Level your shot</h3>
        <p class="mt-3 text-sm text-slate-300">Raise your camera to eye level and leave a touch of headroom. Your eyes should align with the top grid line.</p>
      </article>
      <article class="frosted-card rounded-2xl p-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Lighting</p>
        <h3 class="mt-3 text-lg font-semibold">Face the light</h3>
        <p class="mt-3 text-sm text-slate-300">Diffuse natural light or a soft lamp in front of you. Avoid backlighting that throws your face into shadow.</p>
      </article>
      <article class="frosted-card rounded-2xl p-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Background</p>
        <h3 class="mt-3 text-lg font-semibold">Simplify the scene</h3>
        <p class="mt-3 text-sm text-slate-300">Remove visual clutter and choose contrasting colors to stand out crisply on camera.</p>
      </article>
      <article class="frosted-card rounded-2xl p-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Audio</p>
        <h3 class="mt-3 text-lg font-semibold">Check your mic</h3>
        <p class="mt-3 text-sm text-slate-300">Use headphones or a dedicated microphone to eliminate echo and sharpen your voice.</p>
      </article>
    </div>
    <footer class="mt-10 text-center text-xs text-slate-400">
      No data leaves your device. Close the page or press Stop to instantly end camera access.
    </footer>
  </section>

  <script>
    const continueBtn      = document.getElementById("continueBtn");
    const introSection     = document.getElementById("introSection");
    const stageSection     = document.getElementById("stageSection");
    const videoEl          = document.getElementById("video");
    const videoInner       = document.getElementById("videoInner");
    const gridEl           = document.getElementById("grid");
    const toggleReverseBtn = document.getElementById("toggleReverse");
    const toggleGridBtn    = document.getElementById("toggleGrid");
    const stopBtn          = document.getElementById("stopBtn");
    const zoomInBtn        = document.getElementById("zoomIn");
    const zoomOutBtn       = document.getElementById("zoomOut");
    const zoomValue        = document.getElementById("zoomValue");
    const labelLeft        = document.getElementById("labelLeft");
    const labelRight       = document.getElementById("labelRight");
    const stageElem        = document.getElementById("stageSection");

    let stream    = null;
    let mirrored  = true;
    let gridOn    = false;
    let zoom      = 1;
    let hideTimer = null;

    async function startCamera() {
      stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false });
      videoEl.srcObject = stream;
      await videoEl.play();
      introSection.classList.add("hidden");
      stageSection.classList.remove("hidden");
      videoEl.classList.toggle("mirror", mirrored);
      toggleReverseBtn.classList.toggle("active", mirrored);
      applyZoom();
      updateLabels(true);
    }

    function stopCamera() {
      if (stream) stream.getTracks().forEach(t => t.stop());
      stream = null;
      gridOn      = false;
      toggleGridBtn.classList.remove("active");
      gridEl.style.opacity = "0";
      mirrored  = true;
      videoEl.classList.add("mirror");
      toggleReverseBtn.classList.add("active");
      hideLabels();
      introSection.classList.remove("hidden");
      stageSection.classList.add("hidden");
    }

    function applyZoom() {
      videoInner.style.transform = `scale(${zoom})`;
      zoomValue.textContent        = `${zoom.toFixed(2)}x`;
    }
    function setZoom(v) {
      zoom = Math.min(3, Math.max(1, v));
      applyZoom();
    }

    function updateLabels(show = false) {
      if (mirrored) {
        labelLeft.textContent  = "Left";
        labelRight.textContent = "Right";
        labelLeft.style.left   = "0.75rem";  labelLeft.style.right   = "";
        labelRight.style.right = "0.75rem";  labelRight.style.left  = "";
      } else {
        labelLeft.textContent  = "Left";
        labelRight.textContent = "Right";
        labelLeft.style.right  = "0.75rem";  labelLeft.style.left    = "";
        labelRight.style.left  = "0.75rem";  labelRight.style.right  = "";
      }
      if (show) showLabelsTemporarily();
    }
    function showLabelsTemporarily() {
      clearTimeout(hideTimer);
      labelLeft.classList.remove("hidden-soft");
      labelRight.classList.remove("hidden-soft");
      hideTimer = setTimeout(hideLabels, 2200);
    }
    function hideLabels() {
      labelLeft.classList.add("hidden-soft");
      labelRight.classList.add("hidden-soft");
    }

    continueBtn.addEventListener("click", startCamera);
    stopBtn.addEventListener("click", stopCamera);
    toggleReverseBtn.addEventListener("click", () => {
      mirrored = !mirrored;
      videoEl.classList.toggle("mirror", mirrored);
      toggleReverseBtn.classList.toggle("active", mirrored);
      updateLabels(true);
    });
    toggleGridBtn.addEventListener("click", () => {
      gridOn = !gridOn;
      gridEl.style.opacity = gridOn ? "1" : "0";
      toggleGridBtn.classList.toggle("active", gridOn);
    });
    zoomInBtn.addEventListener("click",  () => setZoom(zoom + 0.1));
    zoomOutBtn.addEventListener("click", () => setZoom(zoom - 0.1));

    stageElem.addEventListener("wheel", e => {
      e.preventDefault();
      setZoom(zoom + (Math.sign(e.deltaY) < 0 ? 0.08 : -0.08));
    }, { passive: false });

    window.addEventListener("beforeunload", () => {
      if (stream) stream.getTracks().forEach(t => t.stop());
    });
  </script>
</body>
</html>
